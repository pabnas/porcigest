<html lang="en">
  {% include '_head.html' %}
  {% load static %}
  <script src="{% static 'js/sb-admin-2.js' %}" defer></script>
  <body>
    <div id="wrapper">
        {% include '_sidebar.html' %}
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">
                {% include '_topbar.html' %}

                <div class="container-fluid mt-5">
                  {% include 'gestion_animales/movimientos/nav_bar.html' %}

                  <!-- Content Row -->
                  <div class="row bg-gray-300">
                    <form method="post" enctype="multipart/form-data" class="col align-self-center py-5 px-3">
                      <div class="container">
                        <div class="row">
                          <div class="col-4 col-sm text-black h4">
                            {{ form.id_corral.errors }}
                            {{ form.id_corral.label_tag }} 
                            {{ form.id_corral }}
                          </div>
                          <div class="col-4 col-sm text-black h4">
                            {{ form.id_animal.errors }}
                            {{ form.id_animal.label_tag }} 
                            {{ form.id_animal }}
                          </div>
                          <div class="col-6 col-sm text-black h4">
                            {{ form.fecha.errors }}
                            {{ form.fecha.label_tag }}
                            {{ form.fecha }}
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-6 text-black h4">
                            {{ form.area_destino.errors }}
                            {{ form.area_destino.label_tag }}
                            {{ form.area_destino }}
                          </div>
                          <div class="col-6 text-black h4">
                            {{ form.corral_destino.errors }}
                            {{ form.corral_destino.label_tag }}
                            {{ form.corral_destino }}
                          </div>
                        </div>

                        <div class="row">
                          <div class="col">
                            <button type="submit" class="btn btn-primary">Registrar</button>
                          </div>
                        </div>
                      </div>
                      {% csrf_token %}
                    </form>
                  </div>

                </div>

                {% include '_footer.html' %}
            </div>
            
        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->
  </body>

  <script>

  $(document).ready(function(){
    chainedSelect(
      selector_object='select#id_corral_destino', 
      data_key='corral_id',
      data_key_recieve='animal_ids',
      url='/gestion_animales/movimientos/get_animals_from_corral', 
      target_object='id_id_animal'
    );

    chainedSelect(
      selector_object='select#id_area_destino', 
      data_key='area_id',
      data_key_recieve='corrals_ids',
      url='/gestion_animales/movimientos/get_corrals_from_area', 
      target_object='id_corral_destino'
    );
  });
  </script>
</html>